<chapter id="advanced-features">
<title
>Características Avançadas do amaroK</title>


<sect1 id="keybd-shortcuts">
<title
>Atalhos do Teclado</title>

<para
>O &amarok; usa os atalhos do teclado, como a maioria das outras aplicações; em baixo, encontra-se uma listagem desses atalhos e das suas acções respectivas. Os atalhos globais podem ser configurados se carregar com o &RMB; na janela do Leitor e se seleccionar a opção <guimenuitem
>Configurar os Atalhos Globais...</guimenuitem
>. Os atalhos do &amarok; podem ser configurados se carregar com o &RMB; na janela do Leitor e seleccionar a opção <guimenuitem
>Configurar os Atalhos...</guimenuitem
></para>

<tip
><para
>Você poderá atribuir teclas multimédia para funcionarem como atalhos do &amarok;, tornando o seu teclado um centro de controlo do &amarok;.</para
></tip>

<para
>Os atalhos globais são:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Combinação de Teclas</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>X</keycap
></keycombo
></entry>
<entry
>Reproduzir</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>C</keycap
></keycombo
></entry>
<entry
>Pausa</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>V</keycap
></keycombo
></entry>
<entry
>Parar</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>B</keycap
></keycombo
></entry>
<entry
>Próxima Faixa</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Faixa Anterior</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>KP_Add</keycap
></keycombo
></entry>
<entry
>Aumentar o Volume</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>KP_Subtract</keycap
></keycombo
></entry>
<entry
>Diminuir o Volume</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Shift</keycap
><keycap
>KP_Add</keycap
></keycombo
></entry>
<entry
>Avançar</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Shift</keycap
><keycap
>KP_Subtract</keycap
></keycombo
></entry>
<entry
>Recuar</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>A</keycap
></keycombo
></entry>
<entry
>Adicionar Média</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>P</keycap
></keycombo
></entry>
<entry
>Comutar a Lista</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>O</keycap
></keycombo
></entry>
<entry
>Mostrar o OSD</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>M</keycap
></keycombo
></entry>
<entry
>Volume Silenciado</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>Os atalhos do &amarok; são:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Combinação de Teclas</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>C</keycap
></keycombo
></entry>
<entry
>Copiar</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>KP_Enter</keycap
></keycombo
></entry>
<entry
>Ir para a Actual</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>D</keycap
></keycombo
></entry>
<entry
>Colocar na Fila as Faixas Seleccionadas</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Q</keycap
></keycombo
></entry>
<entry
>Sair</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Shift</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Refazer</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>S</keycap
></keycombo
></entry>
<entry
>Gravar a Lista de Reprodução</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>A</keycap
></keycombo
></entry>
<entry
>Seleccionar Tudo</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>M</keycap
></keycombo
></entry>
<entry
>Mostrar o Menu</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>H</keycap
></keycombo
></entry>
<entry
>Baralhar</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Desfazer</entry>
</row>


</tbody>
</tgroup>
</informaltable>


<para
>Os atalhos do Navegador na Lista de Reprodução são:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Combinação de Teclas</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycap
>Espaço</keycap
></entry>
<entry
>Carregar Listas</entry>
</row>

<row>
<entry
><keycap
>F2</keycap
></entry>
<entry
>Mudar o Nome da Lista</entry>
</row>

<row>
<entry
><keycap
>Backspace</keycap
></entry>
<entry
>Remover a Lista</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>

<sect1 id="the-dcop-interface">
<title
>A Interface DCOP</title>

<para
>A interface de DCOP do amaroK oferece-lhe uma forma simples de controlar o amaroK com os seus próprios programas personalizados.</para>

<para
>A interface de DCOP do amaroK tem várias funções genéricas que poderão ser encontradas noutras aplicações do KDE. Esta secção está dividida em seis tabelas e pretende descrever as funções do DCOP para a colecção, o navegador de contexto, o leitor, a lista, o navegador da lista e para os programas. Um exemplo da função de DCOP <quote
>pause</quote
> seria semelhante ao seguinte:</para>

<para
><prompt
>&percnt;</prompt
>dcop amarok player pause</para>

<sect2 id="dcop-collection">
<title
>dcop amarok collection</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Chamada DCOP</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
>query</entry>
<entry
>A chamada <quote
>query</quote
> permite-lhe enviar pesquisas directas à base de dados da colecção do &amarok;.</entry>
</row>

<row>
<entry
>scanCollection</entry>
<entry
>A chamada <quote
>scanCollection</quote
> efectua uma pesquisa manual sobre a sua colecção.</entry>
</row>

<row>
<entry
>scanCollectionChanges</entry>
<entry
>A chamada <quote
>scanCollectionChanges</quote
> efectua uma pesquisa manual, à procura de mudanças na sua colecção.</entry>
</row>

<row>
<entry
>similarArtists</entry>
<entry
>A chamada <quote
>similarArtists</quote
> devolve os artistas semelhantes à faixa actual. Os resultados são limitados pelo valor inteiro em <quote
>artistas</quote
>.</entry>
</row>

<row>
<entry
>totalAlbums</entry>
<entry
>A chamada <quote
>totalAlbums</quote
> devolve o número total de álbuns na sua colecção.</entry>
</row>

<row>
<entry
>totalArtists</entry>
<entry
>A chamada <quote
>totalArtists</quote
> devolve o número total de artistas na sua colecção.</entry>
</row>

<row>
<entry
>totalCompilations</entry>
<entry
>A chamada <quote
>totalCompilations</quote
> devolve o número total de compilações na sua colecção.</entry>
</row>

<row>
<entry
>totalGenres</entry>
<entry
>A chamada <quote
>totalGenres</quote
> devolve o número total de géneros musicais na sua colecção.</entry>
</row>

<row>
<entry
>totalTracks</entry>
<entry
>A chamada <quote
>totalTracks</quote
> devolve o número total de faixas na sua colecção.</entry>
</row>


</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-player">
<title
>dcop amarok player</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Chamada DCOP</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
>álbum</entry>
<entry
>A chamada <quote
>album</quote
> devolve o álbum da música que está a tocar de momento.</entry>
</row>

<row>
<entry
>artist</entry>
<entry
>A chamada <quote
>artist</quote
> devolve o artista da faixa actual.</entry>
</row>

<row>
<entry
>bitrate</entry>
<entry
>A chamada <quote
>bitrate</quote
> devolve o título da faixa actual.</entry>
</row>

<row>
<entry
>comment</entry>
<entry
>A chamada <quote
>comment</quote
> devolve o comentário da música a tocar de momento.</entry>
</row>

<row>
<entry
>coverImage</entry>
<entry
>A chamada <quote
>coverImage</quote
> devolve o URL codificado da imagem de capa da faixa actual.</entry>
</row>

<row>
<entry
>currentTime</entry>
<entry
>A chamada <quote
>currentTime</quote
> devolve o artista da faixa actual.</entry>
</row>

<row>
<entry
>encodedURL</entry>
<entry
>A chamada <quote
>encodedURL</quote
> devolve o URL da faixa actual, com os espaços codificados.</entry>
</row>

<row>
<entry
>motor</entry>
<entry
>A chamada <quote
>engine</quote
> devolve o motor de áudio actual.</entry>
</row>

<row>
<entry
>género</entry>
<entry
>A chamada <quote
>genre</quote
> devolve o género da música a tocar de momento.</entry>
</row>

<row>
<entry
>lyrics</entry>
<entry
>A chamada <quote
>lyrics</quote
> devolve as letras em 'cache' da faixa actual.</entry>
</row>

<row>
<entry
>lyricsByPath</entry>
<entry
>A chamada <quote
>lyricsByPath</quote
> devolve as letras em 'cache' de uma faixa definida pela sua localização.</entry>
</row>

<row>
<entry
>nowPlaying</entry>
<entry
>A chamada <quote
>nowPlaying</quote
> devolve <quote
>Artista - Título</quote
> da faixa a tocar de momento. Se uma das marcas ID3 estiver em branco, só o <quote
>Artista</quote
> ou o <quote
>Título</quote
> é apresentado (sem o <quote
>-</quote
>).</entry>
</row>

<row>
<entry
>path</entry>
<entry
>A chamada <quote
>path</quote
> devolve o local no sistema de ficheiros da faixa actual.</entry>
</row>

<row>
<entry
>setContextStyle</entry>
<entry
>A chamada <quote
>setContextStyle</quote
> define o tema de CSS do Navegador de Contexto, com base no seu nome.</entry>
</row>

<row>
<entry
>título</entry>
<entry
>A chamada <quote
>title</quote
> devolve o título da faixa actual.</entry>
</row>

<row>
<entry
>totalTime</entry>
<entry
>A chamada <quote
>totalTime</quote
> devolve o tempo total (mm:ss) da faixa actual.</entry>
</row>

<row>
<entry
>track</entry>
<entry
>A chamada <quote
>track</quote
> devolve o número da faixa actual.</entry>
</row>

<row>
<entry
>ano</entry>
<entry
>A chamada <quote
>year</quote
> devolve o ano da música a tocar de momento.</entry>
</row>

<row>
<entry
>dynamicModeStatus</entry>
<entry
>A chamada <quote
>dynamicModeStatus</quote
> devolve um valor verdadeiro ou falso para indicar se o modo dinâmico está activo.</entry>
</row>

<row>
<entry
>equalizerEnabled</entry>
<entry
>A chamada <quote
>equalizerEnabled</quote
> devolve um valor verdadeiro ou falso para indicar se o equalizador está activo.</entry>
</row>

<row>
<entry
>isPlaying</entry>
<entry
>A chamada <quote
>isPlaying</quote
> devolve um valor verdadeiro ou falso para indicar se o leitor está a tocar ou não.</entry>
</row>

<row>
<entry
>randomModeStatus</entry>
<entry
>A chamada <quote
>randomModeStatus</quote
> devolve o estado do Modo Aleatório com um valor verdadeiro ou falso.</entry>
</row>

<row>
<entry
>repeatPlaylistStatus</entry>
<entry
>A chamada <quote
>repeatPlaylistStatus</quote
> devolve o estado da Repetição da Lista de Músicas com um valor verdadeiro ou falso.</entry>
</row>

<row>
<entry
>repeatTrackStatus</entry>
<entry
>A chamada <quote
>repeatTrackStatus</quote
> devolve o estado de Repetição da Faixa com um valor verdadeiro ou falso.</entry>
</row>

<row>
<entry
>getVolume</entry>
<entry
>A chamada <quote
>getVolume</quote
> devolve um valor para o nível de volume, definido como um valor de 0-100.</entry>
</row>

<row>
<entry
>sampleRate</entry>
<entry
>A chamada <quote
>sampleRate</quote
> devolve a taxa de amostragem da faixa actualmente em reprodução.</entry>
</row>

<row>
<entry
>score</entry>
<entry
>A chamada <quote
>score</quote
> devolve a pontuação da faixa actual.</entry>
</row>

<row>
<entry
>setLyricsByPath</entry>
<entry
>A chamada <quote
>setLyricsByPath</quote
> configura as letras de uma faixa, com base na sua localização. Use a chamada <quote
>lyrics</quote
> para ver os exemplos de formatação correcta em HTML.</entry>
</row>

<row>
<entry
>status</entry>
<entry
>A chamada <quote
>status</quote
> devolve um valor para o estado do motor, sendo 2 para estado em reprodução, 1 para pausa e 0 para inactivo.</entry>
</row>

<row>
<entry
>trackCurrentTime</entry>
<entry
>A chamada <quote
>trackCurrentTime</quote
> devolve um valor do tempo da faixa actual em segundos.</entry>
</row>

<row>
<entry
>trackPlayCounter</entry>
<entry
>A chamada <quote
>trackPlayCounter</quote
> devolve o número de itens que a faixa actual foi reproduzida.</entry>
</row>

<row>
<entry
>trackTotalTime</entry>
<entry
>A chamada <quote
>trackTotalTime</quote
> devolve um valor do tempo total da faixa em segundos.</entry>
</row>

<row>
<entry
>configEqualizer</entry>
<entry
>A chamada <quote
>configEqualizer</quote
> eleva a janela de configuração do equalizador.</entry>
</row>

<row>
<entry
>enableDynamicMode</entry>
<entry
>A chamada <quote
>enableDynamicMode</quote
> é usada para activar ou desactivar o modo dinâmico, com um valor 0 para desactivado e 1 para activado.</entry>
</row>

<row>
<entry
>enableOSD</entry>
<entry
>A chamada <quote
>enableOSD</quote
> permite-lhe activar ou desactivar a Visualização no Ecrã com um valor verdadeiro ou falso</entry>
</row>

<row>
<entry
>enableRandomMode</entry>
<entry
>A chamada <quote
>enableRandomMode</quote
> permite-lhe activar ou desactivar o modo aleatório com um valor verdadeiro ou falso.</entry>
</row>

<row>
<entry
>enableRepeatPlaylist</entry>
<entry
>A chamada <quote
>enableRepeatPlaylist</quote
> permite-lhe activar ou desactivar o modo de repetição da lista de músicas com um valor verdadeiro ou falso.</entry>
</row>

<row>
<entry
>enableRepeatTrack</entry>
<entry
>A chamada <quote
>enableRepeatTrack</quote
> permite-lhe activar ou desactivar o modo de repetição da faixa com um valor verdadeiro ou falso.</entry>
</row>

<row>
<entry
>mute</entry>
<entry
>A chamada <quote
>mute</quote
> permite-lhe colocar ou retirar do silêncio a faixa actual.</entry>
</row>

<row>
<entry
>next</entry>
<entry
>A chamada <quote
>next</quote
> avança o leitor uma faixa.</entry>
</row>

<row>
<entry
>pause</entry>
<entry
>A chamada <quote
>pause</quote
> coloca a faixa actual em pausa.</entry>
</row>

<row>
<entry
>play</entry>
<entry
>A chamada <quote
>play</quote
> inicia o leitor do ponto em que foi interrompido da última vez.</entry>
</row>

<row>
<entry
>playPause</entry>
<entry
>A chamada <quote
>playPause</quote
> inicia o leitor se estiver actualmente parado ou em pausa. Também coloca o leitor em pausa se estiver a tocar uma faixa de momento.</entry>
</row>

<row>
<entry
>prev</entry>
<entry
>A chamada <quote
>prev</quote
> recua uma faixa no leitor.</entry>
</row>

<row>
<entry
>seek</entry>
<entry
>A chamada <quote
>seek</quote
> é usada para se posicionar num ponto específico da faixa, com base num valor indicado em segundos.</entry>
</row>

<row>
<entry
>seekRelative</entry>
<entry
>A chamada <quote
>seekRelative</quote
> é usada para se posicionar num posição relativa à actual da faixa, com base num valor definido em segundos.</entry>
</row>

<row>
<entry
>setEqualizer</entry>
<entry
>A chamada <quote
>setEqualizer</quote
> usa onze inteiros separados por espaços para configurar os valores das barras do equalizador. Os valores das barras vão desde -255, o valor mais baixo, até 255 como mais alto. O primeiro inteiro é usado para definir o valor de pré-amplificação, enquanto os restantes definem os valores de resposta na frequência do pré-amplificador desde 60Hz até 16kHz.</entry>
</row>

<row>
<entry
>setEqualizerEnabled</entry>
<entry
>A chamada <quote
>setEqualizerEnabled</quote
> é usada para activar o equalizador com base num valor verdadeiro ou falso.</entry>
</row>

<row>
<entry
>setScore</entry>
<entry
>A chamada <quote
>setScore</quote
> configura a pontuação da faixa actual, definida como um valor de 0 a 100.</entry>
</row>

<row>
<entry
>setScoreByPath</entry>
<entry
>A chamada <quote
>setScoreByPath</quote
> configura a pontuação de uma faixa, definida pela sua localização, seguida da sua pontuação, definida como um valor de 0 a 100.</entry>
</row>

<row>
<entry
>setVolume</entry>
<entry
>A chamada <quote
>setVolume</quote
> ajusta o volume para um nível corresponde a um número entre 0 e 100.</entry>
</row>

<row>
<entry
>showBrowser</entry>
<entry
>A chamada <quote
>showBrowser</quote
> mostra um navegador da janela da lista de músicas. Os valores válidos são 'context', 'collection', 'playlist', 'media' e 'file'.</entry>
</row>

<row>
<entry
>showOSD</entry>
<entry
>A chamada <quote
>showOSD</quote
> eleva o OSD para mostrar as informações da faixa actual.</entry>
</row>

<row>
<entry
>stop</entry>
<entry
>A chamada <quote
>stop</quote
> irá parar o leitor, se este estiver a tocar de momento.</entry>
</row>

<row>
<entry
>volumeDown</entry>
<entry
>A chamada <quote
>volumeDown</quote
> desce uma posição no volume.</entry>
</row>

<row>
<entry
>volumeUp</entry>
<entry
>A chamada <quote
>volumeUp</quote
> sobe uma posição no volume.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-playlist">
<title
>dcop amarok playlist</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Chamada DCOP</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
>saveCurrentPlaylist</entry>
<entry
>A chamada <quote
>saveCurrentPlaylist</quote
> grava a lista actual como o ficheiro '~/.kde/share/apps/amarok/current.xml'.</entry>
</row>

<row>
<entry
>getActiveIndex</entry>
<entry
>A chamada <quote
>getActiveIndex</quote
> devolve um número inteiro para a posição da faixa actual na lista de reprodução.</entry>
</row>

<row>
<entry
>getTotalTrackCount</entry>
<entry
>A chamada <quote
>getTotalTrackCount</quote
> devolve o número total de faixas na lista de reprodução.</entry>
</row>

<row>
<entry
>addMedia</entry>
<entry
>A chamada <quote
>addMedia</quote
> é usada para adicionar ficheiros individuais à lista.</entry>
</row>

<row>
<entry
>addMediaList</entry>
<entry
>A chamada <quote
>addMediaList</quote
> é usada para adicionar vários ficheiros à lista de reprodução.</entry>
</row>

<row>
<entry
>clearPlaylist</entry>
<entry
>A chamada <quote
>clearPlaylist</quote
> é usada para limpar a lista de reprodução inteira.</entry>
</row>

<row>
<entry
>playByIndex</entry>
<entry
>A chamada <quote
>playByIndex</quote
> inicia a reprodução de uma faixa, com base na sua posição na lista de reprodução. </entry>
</row>

<row>
<entry
>playMedia</entry>
<entry
>A chamada <quote
>playMEDIA</quote
> inicia a reprodução de uma faixa com base no seu KURL.</entry>
</row>

<row>
<entry
>popupMessage</entry>
<entry
>A chamada <quote
>popupMessage</quote
> inicia uma mensagem na janela da lista de reprodução. A mensagem é indicada através de uma QString.</entry>
</row>

<row>
<entry
>repopulate</entry>
<entry
>A chamada <quote
>repopulate</quote
> volta a preencher a lista de reprodução com faixas no modo dinâmico.</entry>
</row>

<row>
<entry
>removeCurrentTrack</entry>
<entry
>A chamada <quote
>removeCurrentTrack</quote
> remove o item da faixa actual da lista de reprodução.</entry>
</row>

<row>
<entry
>saveM3u</entry>
<entry
>A chamada <quote
>saveM3u</quote
> grava a lista de reprodução actual no formato M3U. Deverá indicar o local onde gravar o ficheiro e incluir um valor 0 ou 1 para indicar se deve ou não gravar locais relativos.</entry>
</row>

<row>
<entry
>setStopAfterCurrent</entry>
<entry
>A chamada <quote
>setStopAfterCurrent</quote
> pára a reprodução da lista após ter terminado a faixa actual.</entry>
</row>

<row>
<entry
>shortStatusMessage</entry>
<entry
>A chamada <quote
>shortStatusMessage</quote
> mostra uma sequência de texto como uma mensagem da barra de estado.</entry>
</row>

<row>
<entry
>shufflePlaylist</entry>
<entry
>A chamada <quote
>shufflePlaylist</quote
> troca a ordem das faixas na lista de reprodução.</entry>
</row>

<row>
<entry
>togglePlaylist</entry>
<entry
>A chamada <quote
>togglePlaylist</quote
> activa ou desactiva a utilização da janela da lista de reprodução.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-script">
<title
>dcop amarok script</title>


<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Chamada DCOP</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
>listRunningScripts</entry>
<entry
>A chamada <quote
>listRunningScripts</quote
> irá mostrar todos os 'scripts' do &amarok; em execução.</entry>
</row>

<row>
<entry
>runScript</entry>
<entry
>A chamada <quote
>runScript</quote
> irá iniciar um programa do &amarok; com base no seu nome.</entry>
</row>

<row>
<entry
>stopScript</entry>
<entry
>A chamada <quote
>stopScript</quote
> irá parar um programa do &amarok; com base no seu nome.</entry>
</row>

<row>
<entry
>addCustomMenuItem</entry>
<entry
>A chamada <quote
>addCustomMenuItem</quote
> adiciona um item ao menu de contexto da lista de reprodução. Esta chamada recebe duas QStrings, sendo a primeira o título do submenu e a segunda o título do item no submenu. Ambas as QStrings são devolvidas no sistema de notificação do gestor de 'scripts'.</entry>
</row>

<row>
<entry
>removeCustomMenuItem</entry>
<entry
>A chamada <quote
>removeCustomMenuItem</quote
> remove os itens do menu adicionados ao menu de contexto da lista de reprodução com a chamada 'addCustomMenuItem'. Esta chamada usa as mesmas QStrings que a 'addCustomMenuItem'.</entry>
</row>

</tbody>
</tgroup>
</informaltable>


</sect2>

</sect1>

<sect1 id="cmd-line-options">
<title
>Opções da Linha de Comandos</title>

<para
>O amaroK suporta a utilização das opções normais da linha de comandos para o Qt e o &kde;. O amaroK tem também as suas opções específicas da aplicação.</para>

<para
>As opções do Qt e do kde:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Opção</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
>--help</entry>
<entry
>Mostra a ajuda acerca das opções.</entry>
</row>

<row>
<entry
>--help-qt</entry>
<entry
>Mostra as opções específicas do Qt.</entry>
</row>

<row>
<entry
>--help-kde</entry>
<entry
>Mostra opções específicas do KDE.</entry>
</row>

<row>
<entry
>--help-all</entry>
<entry
>Mostra todas as opções.</entry>
</row>

<row>
<entry
>--author</entry>
<entry
>Mostra informações sobre o autor.</entry>
</row>

<row>
<entry
>-v, --version</entry>
<entry
>Mostra a versão.</entry>
</row>

<row>
<entry
>--license</entry>
<entry
>Mostra informações acerca da licença.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>As opções do amaroK:</para>

<note
><para
>As opções do &amarok; foram concebidas para ser utilizadas enquanto o &amarok; está a correr.</para
></note>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Opção</entry>
<entry
>Acção</entry>
</row>
</thead>
<tbody>

<row>
<entry
>-r, --previous</entry>
<entry
>Passa à faixa anterior na lista de reprodução.</entry>
</row>

<row>
<entry
>-p, --play</entry>
<entry
>Para de tocar a lista de músicas actual.</entry>
</row>

<row>
<entry
>-s, --stop</entry>
<entry
>Para a reprodução.</entry>
</row>

<row>
<entry
>--pause</entry>
<entry
>Pausa a reprodução.</entry>
</row>

<row>
<entry
>-f, --next</entry>
<entry
>Passa para a próxima faixa na lista de reprodução.</entry>
</row>

<row>
<entry
>-a, --append</entry>
<entry
>Adicionar ficheiros/URLs à lista de reprodução.</entry>
</row>

<row>
<entry
>-e, --enqueue</entry>
<entry
>Veja 'append', disponível por razões de compatibilidade.</entry>
</row>

<row>
<entry
>--queue</entry>
<entry
>Coloca ficheiros/URLs na lista a seguir à faixa actual.</entry>
</row
> 

<row>
<entry
>-m, --toggle-playlist-window</entry>
<entry
>Activa ou desactiva a janela da lista de músicas.</entry>
</row>

<row>
<entry
>--wizard</entry>
<entry
>Lança o assistente da Primeira Execução.</entry>
</row>

<row>
<entry
>--engine "nome"</entry>
<entry
>Inicia o &amarok; como o motor "name".</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>


<sect1 id="script-writing">
<title
>Criação de 'Scripts'</title>

<para
>A programação permite-lhe extender o &amarok; facilmente sem ter de alterar o código principal. Os programas ou 'scripts' são semelhantes a 'plugins', mas em vez de terem uma API de 'plugins' dedicada, eles usam apenas a interface de DCOP do &amarok; para a comunicação. Isto torna possível criar 'scripts' em qualquer linguagem de programa, como o Ruby, o Python ou o PHP. Não só poderá criar programas nas linguagens de 'scripting' clássicas, como também em linguagens compiladas, como em C++ ou em C simples. Para além disso, o &amarok; poderá notificar os 'scripts' para certos eventos e fazer com que estes reajam de acordo com essa situação. Este sistema de notificação será explicado mais tarde nesta secção.</para>

<sect2 id="script-bindings">
<title
>Interfaces</title>

<para
>É possível criar programas simples que não necessitem de interacção com o utilizador, assim como também possível criar programas com GUIs confortáveis que se comportem como pequenas aplicações independentes. Para a programação da GUI, poderá ser usada uma das várias interfaces que o KDE oferece, como por exemplo o RubyQt, uma interface para a biblioteca do Qt em ruby. Contudo, deve ser claro que nem todos os utilizadores têm as interfaces disponíveis instaladas. Se optar por usar uma interface, tente usar uma das que seja mais usada (p.ex., o RubyQt ou o PyQt).</para>

<para
>Para mostrar alguma reacção, quando algum programa se recusa a correr devido a uma dependência em falta, verifique por favor o seu programa para saber se o módulo que deseja incluir existe de facto. Se faltar essa dependência, deverá capturar o erro e mostrar uma janela de informação, usando a ferramenta da linha de comandos "kdialog", para que o utilizador aprenda porque é que o programa não funciona.</para>

<para
>Este exemplo mostra como capturar uma dependência em falta no Ruby:</para>

<programlisting
>begin
       require 'Korundum'
rescue LoadError
       error = 'É necessário o Korundum (interface para o KDE em Ruby) do kdebindings v3.4 neste programa.'
       `kdialog --sorry '#{error}'`
       exit
end
</programlisting>

</sect2>

<sect2 id="script-templates">
<title
>Introdução: Os Modelos</title>

<para
>O &amarok; oferece modelos de programas em várias linguagens na pasta <filename class="directory"
>scripts/templates/</filename
>. Poderá usar estes programas como base para os seus próprios 'scripts', assim como extendê-los com a funcionalidade que necessita. Irá reparar que a programação é, de facto, bastante intuitiva; por exemplo, se souber programar mais ou menos em Python, a criação do seu programa não irá levar muito tempo.</para>

</sect2>

<sect2 id="script-controlling-amarok">
<title
>Controlar o &amarok; com o DCOP</title>

<para
>Os programas poderão controlar o amaroK, invocando algumas das suas funções de DCOP. A forma mais simples de invocar uma função do DCOP é usando o utilitário da linha de comandos "dcop", que faz parte de qualquer distribuição do KDE.</para>

<para
>Aqui está um exemplo para aumentar o volume-mestre:</para>

<programlisting
>dcop amarok player volumeUp</programlisting>

<para
>A maioria as linguagens de programação permitem executar programas externos, com uma função do tipo exec(). Desta forma, o utilitário "dcop" poderá ser invocado facilmente. Aqui está um exemplo simples em Python:</para>

<programlisting
>import os
 os.system("dcop amarok player volumeDown")
</programlisting>

</sect2>

<sect2 id="script-notifications">
<title
>Notificações</title>

<para
>O &amarok; envia notificações para todos os programas em execução, escrevendo mensagens para o seu canal de 'stdin'. O programa deverá, deste modo, vigiar constantemente o 'stdin', de modo a reagir de acordo com cada um dos eventos possíveis. Os programas também poderão optar por ignorar qualquer evento que não necessitem.</para>

<para
>Serão enviadas as seguintes notificações pelo &amarok;:</para>

<programlisting
><cmdsynopsis
><command
>configure</command
></cmdsynopsis>
Diz ao programa para mostrar a sua janela de configuração. O programa deverá
lidar com o carregamento e gravação das suas opções de configuração. Quando
um programa é iniciado, o amaroK muda a sua pasta de trabalho para a pasta
onde todos os dados deverão estar gravados.
</programlisting>

<programlisting
><cmdsynopsis
><command
>engineStateChange:</command
><arg
>empty|idle|paused|playing</arg
></cmdsynopsis>
Assinala uma mudança no estado do motor.
</programlisting>

<programlisting
><cmdsynopsis
><command
>trackChange</command
></cmdsynopsis>
Assinala o início de uma faixa nova. O programa poderá então usar as
funções de DCOP para obter mais informações sobre a faixa, p.ex., os 
meta-dados e o tamanho.
</programlisting>

<programlisting
><cmdsynopsis
><command
>volumeChange</command
><arg
>novoVolume</arg
></cmdsynopsis>
Assinala a mudança do nível de volume-mestre. O volume é um número inteiro
de 0-100.
</programlisting>

<programlisting
><cmdsynopsis
><command
>customMenuClicked:</command
><arg
>submenu tituloItem locais</arg
></cmdsynopsis>
Devolve as localizações dos ficheiros seleccionados na lista de reprodução
quando o item do menu de contexto da lista de reprodução for carregado. O
submenu e o tituloItem são também devolvidos por razões de identificação,
no caso de um programa estar à espera de várias notificações.
Para inserir um item no menu de contexto, use a chamada de DCOP
'dcop amarok script addCustomMenuItem( submenu tituloItem )'. Para remover
um item do menu de contexto, use a chamada de DCOP
'dcop amarok script removeCustomMenuItem( submenu tituloItem )'.
</programlisting>

</sect2>

<sect2 id="script-termination">
<title
>Finalização do 'Script'</title>

<para
>Antes de o &amarok; sair, ou quando o utilizador parar um 'script' com o Gestor de 'Scripts', o &amarok; envia o sinal SIGTERM para o programa. Este sinal poderá ser capturado para fazer algum trabalho de limpeza, como a gravação dos dados ou das opções de configuração.</para>

</sect2>

<sect2 id="script-packaging">
<title
>Empacotamento</title>

<para
>O Gestor de 'Scripts' do &amarok; é capaz de instalar pacotes de programas que o utilizador tenha obtido de um servidor da Web. Os pacotes são ficheiros comprimidos perfeitamente normais (.tar), opcionalmente comprimidos com o bzip2 (.bz2). Recomenda-se em grande medida que use um nome de ficheiro do tipo o-meu-programa.amarokscript.tar.bz2, para que o utilizador consiga identificar facilmente o pacote como um programa do amaroK.</para>

<note
><para
>O &amarok; 1.3 só irá aceitar pacotes de 'scripts' com a extensão 'amarokscript', por isso é melhor é usá-la logo desde o início.</para
></note>

<para
>O conteúdo do pacote deverá estar organizado da seguinte forma:</para>

<programlisting
>myscript/
   README
   o-meu-programa.py (executável)
   um-modulo.py
   xpto.data
   ...
</programlisting>

</sect2>

<sect2 id="script-permissions">
<title
>Permissões dos ficheiros</title>

<para
>O programa principal deverá ter permissões de execução (+x) activas, enquanto os módulos adicionais que o programa carregar não deverão ser executáveis. Para preservar as permissões do ficheiro no pacote, deverá usar o 'tar' com a opção '-p':</para>

<programlisting
>tar -cf o-meu-programa.amarokscript.tar -p o-meu-programa</programlisting>

<note
><para
>O &amarok; não será capaz de instalar o programa se as permissões não estiverem definidas correctamente.</para
></note>

</sect2>

<sect2 id="script-distributing">
<title
>Distribuir</title>

<para
>Quando o pacote estiver terminado, poderá enviá-lo para o <ulink url="http://www.kde-apps.org"
>www.kde-apps.org</ulink
> e adicionar a referência à <ulink url="http://amarok.kde.org/amarokwiki/index.php/Scripts"
>Página de 'Scripts' do Wiki do &amarok;</ulink
>. Para o item do 'kde-apps', deverá usar a categoria de <ulink url="http://kde-apps.org/index.php?xcontentmode=56"
>'Scripts' do &amarok;</ulink
>.</para>

</sect2>

</sect1>


</chapter>

