<chapter id="advanced-features">
<title
>Avancerade funktioner i amaroK</title>


<sect1 id="keybd-shortcuts">
<title
>Snabbtangenter</title>

<para
>&amarok; använder snabbtangenter som de flesta andra program. Nedan finns en lista över dessa snabbtangenter och deras olika funktioner. De globala snabbtangenterna kan ställas in genom att högerklicka i spelarfönstret och välja <guimenuitem
>Anpassa globala genvägar...</guimenuitem
> Snabbtangenterna i &amarok; kan anpassas genom att högerklicka i spelarfönstret och välja <guimenuitem
>Anpassa genvägar...</guimenuitem
></para>

<tip
><para
>Du kan tilldela multimediatangenter att fungera som snabbtangenter i &amarok;, för att låta tangentbordet styra &amarok;.</para
></tip>

<para
>De globala genvägarna är:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Tangentkombination</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>X</keycap
></keycombo
></entry>
<entry
>Spela</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>C</keycap
></keycombo
></entry>
<entry
>Paus</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>V</keycap
></keycombo
></entry>
<entry
>Stanna</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>B</keycap
></keycombo
></entry>
<entry
>Nästa spår</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Föregående spår</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Numeriskt tangentbord +</keycap
></keycombo
></entry>
<entry
>Öka volym</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Numeriskt tangentbord -</keycap
></keycombo
></entry>
<entry
>Minska volym</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Skift</keycap
><keycap
>numeriskt +</keycap
></keycombo
></entry>
<entry
>Sök framåt</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Skift</keycap
><keycap
>numeriskt -</keycap
></keycombo
></entry>
<entry
>Sök bakåt</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>A</keycap
></keycombo
></entry>
<entry
>Lägg till media</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>P</keycap
></keycombo
></entry>
<entry
>Växla spellista</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>O</keycap
></keycombo
></entry>
<entry
>Aktivera skärmvisning</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>M</keycap
></keycombo
></entry>
<entry
>Tysta volym</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>Genvägarna i &amarok; är:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Tangentkombination</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>C</keycap
></keycombo
></entry>
<entry
>Kopiera</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Numeriskt tangentbord Enter</keycap
></keycombo
></entry>
<entry
>Gå till nuvarande</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>D</keycap
></keycombo
></entry>
<entry
>Köa markerade spår</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Q</keycap
></keycombo
></entry>
<entry
>Avsluta</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Skift</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Gör om</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>S</keycap
></keycombo
></entry>
<entry
>Spara spellista</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>A</keycap
></keycombo
></entry>
<entry
>Markera alla</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>M</keycap
></keycombo
></entry>
<entry
>Visa menyrad</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>H</keycap
></keycombo
></entry>
<entry
>Blanda</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Ångra</entry>
</row>


</tbody>
</tgroup>
</informaltable>


<para
>Spellistebläddrarens genvägar är:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Tangentkombination</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycap
>Mellanslag</keycap
></entry>
<entry
>Ladda spellista</entry>
</row>

<row>
<entry
><keycap
>F2</keycap
></entry>
<entry
>Byt namn på spellista</entry>
</row>

<row>
<entry
><keycap
>Backsteg</keycap
></entry>
<entry
>Ta bort spellista</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>

<sect1 id="the-dcop-interface">
<title
>DCOP-gränssnittet</title>

<para
>AmaroKs DCOP-gränssnitt tillhandahåller ett enkelt sätt att styra amaroK med dina egna skript.</para>

<para
>DCOP-gränssnittet i amaroK har många generella funktioner som också finns i andra KDE-program. Det här avsnittet är uppdelat i fyra tabller och är avsett att beskriva DCOP-anrop för samlingen, spelaren, spellistan och skript. Ett exempel på DCOP-funktionen <quote
>pause</quote
> skulle se ut så här:</para>

<para
><prompt
>&percnt;</prompt
>dcop amarok player pause</para>

<sect2 id="dcop-collection">
<title
>dcop amarok collection</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-anrop</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
>fråga</entry>
<entry
>Funktionen <quote
>query</quote
> låter dig skicka direkta databasförfrågningar till &amarok;s samling.</entry>
</row>

<row>
<entry
>scanCollection</entry>
<entry
>Funktionen <quote
>scanCollection</quote
> utför en manuell avsökning av din samling.</entry>
</row>

<row>
<entry
>scanCollectionChanges</entry>
<entry
>Funktionen <quote
>scanCollectionChanges</quote
> utför en manuell avsökning av ändringar i din samling.</entry>
</row>

<row>
<entry
>similarArtists</entry>
<entry
>Funktionen <quote
>similarArtists</quote
> returnerar liknande artisten för spåret som för närvarande spelas. Resultatet är begränsat till ett heltalsvärde av <quote
>artists</quote
>.</entry>
</row>

<row>
<entry
>totalAlbums</entry>
<entry
>Funktionen <quote
>totalAlbums</quote
> returnerar det totala antalet album i din samling.</entry>
</row>

<row>
<entry
>totalArtists</entry>
<entry
>Funktionen <quote
>totalArtists</quote
> returnerar det totala antalet artister i din samling.</entry>
</row>

<row>
<entry
>totalCompilations</entry>
<entry
>Funktionen <quote
>totalCompilations</quote
> returnerar det totala antalet samlingsalbum i din samling.</entry>
</row>

<row>
<entry
>totalGenres</entry>
<entry
>Funktionen <quote
>totalGenres</quote
> returnerar det totala antalet genrer i din samling.</entry>
</row>

<row>
<entry
>totalTracks</entry>
<entry
>Funktionen <quote
>totalTracks</quote
> returnerar det totala antalet spår i din samling.</entry>
</row>


</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-player">
<title
>dcop amarok player</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-anrop</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
>album</entry>
<entry
>Funktionen <quote
>album</quote
> returnerar albumet för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>artist</entry>
<entry
>Funktionen <quote
>artist</quote
> returnerar artisten för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>bitrate</entry>
<entry
>Funktionen <quote
>bitrate</quote
> returnerar bithastigheten för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>comment</entry>
<entry
>Funktionen <quote
>comment</quote
> returnerar kommentaren för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>coverImage</entry>
<entry
>Funktionen <quote
>coverImage</quote
> returnerar webbadressen till nuvarande spårs skivomslag.</entry>
</row>

<row>
<entry
>currentTime</entry>
<entry
>Funktionen <quote
>currentTime</quote
> returnerar positionen (mm:ss) för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>encodedURL</entry>
<entry
>Funktionen <quote
>encodedURL</quote
> returnerar webbadressen för nuvarande spår med mellanslag kodade.</entry>
</row>

<row>
<entry
>engine</entry>
<entry
>Funktionen <quote
>engine</quote
> returnerar nuvarande ljudgränssnitt.</entry>
</row>

<row>
<entry
>genre</entry>
<entry
>Funktionen <quote
>genre</quote
> returnerar genren för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>lyrics</entry>
<entry
>Funktionen <quote
>lyrics</quote
> returnerar cachad sångtext för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>lyricsByPath</entry>
<entry
>Funktionen <quote
>lyricsByPath</quote
> returnerar cachad sångtext för ett spår som anges av sin sökväg.</entry>
</row>

<row>
<entry
>nowPlaying</entry>
<entry
>Funktionen <quote
>nowPlaying</quote
> returnerar <quote
>Artist - Titel</quote
> för spåret som för närvarande spelas. Om någon av de båda ID3-taggarna är tom, visas bara <quote
>Artist</quote
> eller <quote
>Titel</quote
> (utan <quote
>-</quote
>).</entry>
</row>

<row>
<entry
>path</entry>
<entry
>Funktionen <quote
>path</quote
> returnerar filsystemets sökväg till nuvarande spår.</entry>
</row>

<row>
<entry
>setContextStyle</entry>
<entry
>Funktionen <quote
>setContextStyle</quote
> ställer in sammanhangsbläddrarens CSS-tema som anges med sitt namn.</entry>
</row>

<row>
<entry
>title</entry>
<entry
>Funktionen <quote
>title</quote
> returnerar titeln för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>totalTime</entry>
<entry
>Funktionen <quote
>totalTime</quote
> returnerar den totala tiden (mm:ss) för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>track</entry>
<entry
>Funktionen <quote
>track</quote
> returnerar spårnummer för nuvarande spår.</entry>
</row>

<row>
<entry
>year</entry>
<entry
>Funktionen <quote
>year</quote
> returnerar året för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>dynamicModeStatus</entry>
<entry
>Funktionen <quote
>dynamicModeStatus</quote
> returnerar ett värde som är sant eller falskt för att ange om dynamiskt läge är aktiverat.</entry>
</row>

<row>
<entry
>equalizerEnabled</entry>
<entry
>Funktionen <quote
>equalizerEnabled</quote
> returnerar ett värde som är sant eller falskt för att ange om equalizern är aktiverad.</entry>
</row>

<row>
<entry
>isPlaying</entry>
<entry
>Funktionen <quote
>isPlaying</quote
> returnerar ett värde som är sant eller falskt för att ange om spelaren spelar upp något eller inte.</entry>
</row>

<row>
<entry
>randomModeStatus</entry>
<entry
>Funktionen <quote
>randomModeStatus</quote
> returnerar status för slumpmässigt läge med värdet sant eller falskt.</entry>
</row>

<row>
<entry
>repeatPlaylistStatus</entry>
<entry
>Funktionen <quote
>repeatPlaylistStatus</quote
> returnerar status för upprepning av spellista med värdet sant eller falskt.</entry>
</row>

<row>
<entry
>repeatTrackStatus</entry>
<entry
>Funktionen <quote
>repeatTrackStatus</quote
> returnerar status för upprepning av spår med värdet sant eller falskt.</entry>
</row>

<row>
<entry
>getVolume</entry>
<entry
>Funktionen <quote
>getVolume</quote
> returnerar ett värde på volymen som anges med ett värde från 0 till 100.</entry>
</row>

<row>
<entry
>sampleRate</entry>
<entry
>Funktionen <quote
>sampleRate</quote
> returnerar samplingsfrekvensen för nuvarande spår.</entry>
</row>

<row>
<entry
>poäng</entry>
<entry
>Funktionen <quote
>score</quote
> returnerar nuvarande spårets poäng.</entry>
</row>

<row>
<entry
>setLyricsByPath</entry>
<entry
>Funktionen <quote
>setLyricsByPath</quote
> ställer in ett spårs sångtext som anges med sökväg. Använd funktionen <quote
>lyrics</quote
> för att se exempel på riktig formatering av HTML.</entry>
</row>

<row>
<entry
>status</entry>
<entry
>Funktionen <quote
>status</quote
> returnerar ett värde på gränssnittets status. Uppspelning anges med 2, paus anges med 1 och overksam anges med 0.</entry>
</row>

<row>
<entry
>trackCurrentTime</entry>
<entry
>Funktionen <quote
>trackCurrentTime</quote
> returnerar ett värde på nuvarande förfluten tid i sekunder.</entry>
</row>

<row>
<entry
>trackPlayCounter</entry>
<entry
>Funktionen <quote
>trackPlayCounter</quote
> returnerar antal gånger nuvarande spår har spelats.</entry>
</row>

<row>
<entry
>trackTotalTime</entry>
<entry
>Funktionen <quote
>trackTotalTime</quote
> returnerar ett värde på nuvarande spårs totala tid i sekunder.</entry>
</row>

<row>
<entry
>configEqualizer</entry>
<entry
>Funktionen <quote
>configEqualizer</quote
> visar inställningsfönstret för equalizern.</entry>
</row>

<row>
<entry
>enableDynamicMode</entry>
<entry
>Funktionen <quote
>enableDynamicMode</quote
> används för att växla dynamiskt läge med värdet 0 för inaktiverat och 1 för aktiverat.</entry>
</row>

<row>
<entry
>enableOSD</entry>
<entry
>Funktionen <quote
>enableOSD</quote
> låter dig växla skärmvisningen med ett sant eller falskt värde.</entry>
</row>

<row>
<entry
>enableRandomMode</entry>
<entry
>Funktionen <quote
>enableRandomMode</quote
> används för att växla slumpläget med värdet 0 för inaktiverat och 1 för aktiverat.</entry>
</row>

<row>
<entry
>enableRepeatPlaylist</entry>
<entry
>Funktionen <quote
>enableRepeatPlaylist</quote
> används för att växla läget för att upprepa spellistan med värdet 0 för inaktiverat och 1 för aktiverat.</entry>
</row>

<row>
<entry
>enableRepeatTrack</entry>
<entry
>Funktionen <quote
>enableRepeatTrack</quote
> används för att växla läget för att upprepa spår med värdet 0 för inaktiverat och 1 för aktiverat.</entry>
</row>

<row>
<entry
>mute</entry>
<entry
>Funktionen <quote
>mute</quote
> låter dig stänga av och sätta på ljudet för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>next</entry>
<entry
>Funktionen <quote
>next</quote
> går framåt ett spår i spelaren.</entry>
</row>

<row>
<entry
>pause</entry>
<entry
>Funktionen <quote
>pause</quote
> gör paus för spåret som för närvarande spelas.</entry>
</row>

<row>
<entry
>play</entry>
<entry
>Funktionen <quote
>play</quote
> startar spelaren där den senast stoppades.</entry>
</row>

<row>
<entry
>playPause</entry>
<entry
>Funktionen <quote
>playPause</quote
> startar spelaren om den för närvarande är i läget stopp eller paus. Funktionen gör också paus om spelaren för närvarande spelar ett spår.</entry>
</row>

<row>
<entry
>prev</entry>
<entry
>Funktionen <quote
>prev</quote
> går bakåt ett spår i spelaren.</entry>
</row>

<row>
<entry
>seek</entry>
<entry
>Funktionen <quote
>seek</quote
> används för att söka till en viss position i ett spår med ett värde som anges i sekunder.</entry>
</row>

<row>
<entry
>seekRelative</entry>
<entry
>Funktionen <quote
>seekRelative</quote
> används för att söka till en position relativt till spårets nuvarande position med ett värde som anges i sekunder.</entry>
</row>

<row>
<entry
>setEqualizer</entry>
<entry
>Funktionen <quote
>setEqualizer</quote
> använder elva heltal avgränsade med mellanslag för att ställa in equalizerns värden. Skjutreglagens värden går från -255 som minsta värde till 255 som största. Det första heltalet används för att ställa in förförstärkarens värde, och återstående heltal ställer in värden på förförstärkarens frekvenssvar från 60 Hz till 16 kHz.</entry>
</row>

<row>
<entry
>setEqualizerEnabled</entry>
<entry
>Funktionen <quote
>setEqualizerEnabled</quote
> används för att aktivera equalizern med ett sant eller falskt värde.</entry>
</row>

<row>
<entry
>setScore</entry>
<entry
>Funktionen <quote
>setScore</quote
> ställer in nuvarande spårets poäng som anges med ett värde från 0 till 100.</entry>
</row>

<row>
<entry
>setScoreByPath</entry>
<entry
>Funktionen <quote
>setScoreByPath</quote
> ställer in poäng för ett spår som anges med sökväg, följt av pong angivet som ett tal från 0 till 100.</entry>
</row>

<row>
<entry
>setVolume</entry>
<entry
>Funktionen <quote
>setVolume</quote
> justerar volymen till en nivå som anges med ett värde från 0 till 100.</entry>
</row>

<row>
<entry
>showBrowser</entry>
<entry
>Funktionen <quote
>showBrowser</quote
> visar en bläddrare i spellistans fönster. Giltiga värden för bläddraren är context, collection, playlist, media och file.</entry>
</row>

<row>
<entry
>showOSD</entry>
<entry
>Funktionen <quote
>showOSD</quote
> aktiverar skärmvisningen för att visa information om nuvarande spår.</entry>
</row>

<row>
<entry
>stop</entry>
<entry
>Funktionen <quote
>stop</quote
> stoppar spelaren om den för närvarande spelar upp någonting.</entry>
</row>

<row>
<entry
>volumeDown</entry>
<entry
>Funktionen <quote
>volumeDown</quote
> justerar volymen neråt ett steg.</entry>
</row>

<row>
<entry
>volumeUp</entry>
<entry
>Funktionen <quote
>volumeUp</quote
> justerar volymen uppåt ett steg.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-playlist">
<title
>dcop amarok playlist</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-anrop</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
>saveCurrentPlaylist</entry>
<entry
>Funktionen <quote
>saveCurrentPlaylist</quote
> sparar den nuvarande spellistan som ~/.kde/share/apps/amarok/current.xml.</entry>
</row>

<row>
<entry
>getActiveIndex</entry>
<entry
>Funktionen <quote
>getActiveIndex</quote
>  returnerar ett heltalsvärde för nuvarande spårs position i spellistan.</entry>
</row>

<row>
<entry
>getTotalTrackCount</entry>
<entry
>Funktionen <quote
>getTotalTrackCount</quote
> returnerar det totala antalet spår i spellistan.</entry>
</row>

<row>
<entry
>addMedia</entry>
<entry
>Funktionen <quote
>addMedia</quote
> används för att lägga till enstaka filer i spellistan.</entry>
</row>

<row>
<entry
>addMediaList</entry>
<entry
>Funktionen <quote
>addMediaList</quote
> används för att lägga till flera filer i spellistan.</entry>
</row>

<row>
<entry
>clearPlaylist</entry>
<entry
>Funktionen <quote
>clearPlaylist</quote
> används för att rensa hela spellistan.</entry>
</row>

<row>
<entry
>playByIndex</entry>
<entry
>Funktionen <quote
>playByIndex</quote
> startar uppspelning av ett spår med dess position i spellistan. </entry>
</row>

<row>
<entry
>playMedia</entry>
<entry
>Funktionen <quote
>playMEDIA</quote
> startar uppspelning av ett spår som anges av en webbadress.</entry>
</row>

<row>
<entry
>popupMessage</entry>
<entry
>Funktionen <quote
>popupMessage</quote
> visar ett meddelande i spellistans fönster. Meddelandet anges med en QString.</entry>
</row>

<row>
<entry
>repopulate</entry>
<entry
>Funktionen <quote
>repopulate</quote
> fyller spellistan med spår från dynamiskt läge igen.</entry>
</row>

<row>
<entry
>removeCurrentTrack</entry>
<entry
>Funktionen <quote
>removeCurrentTrack</quote
> tar bort nuvarande spår från spellistan.</entry>
</row>

<row>
<entry
>saveM3u</entry>
<entry
>Funktionen <quote
>saveM3u</quote
> spara nuvarande spellista med formatet M3U. Du måste ange sökvägen som filen ska sparas som, och inkludera värdet 0 eller 1 för att ange att relativa sökvägar kan skrivas eller inte.</entry>
</row>

<row>
<entry
>setStopAfterCurrent</entry>
<entry
>Funktionen <quote
>setStopAfterCurrent</quote
> stoppar uppspelning av spellistan efter det nuvarande spåret är klart.</entry>
</row>

<row>
<entry
>shortStatusMessage</entry>
<entry
>Funktionen <quote
>shortStatusMessage</quote
> visar en textsträng som ett meddelande i statusraden.</entry>
</row>

<row>
<entry
>shufflePlaylist</entry>
<entry
>Funktionen <quote
>shufflePlaylist</quote
> gör ordningen av spår i spellistan slumpmässig.</entry>
</row>

<row>
<entry
>togglePlaylist</entry>
<entry
>Funktionen <quote
>togglePlaylist</quote
> ändrar visning av spellistefönstret, antingen av eller på.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-script">
<title
>dcop amarok script</title>


<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-anrop</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
>listRunningScripts</entry>
<entry
>Funktionen <quote
>listRunningScripts</quote
> listar alla skript som kör i &amarok;.</entry>
</row>

<row>
<entry
>runScript</entry>
<entry
>Funktionen <quote
>runScript</quote
> startar ett skript i &amarok; som anges med sitt namn.</entry>
</row>

<row>
<entry
>stopScript</entry>
<entry
>Funktionen <quote
>stopScript</quote
> stoppar ett skript i &amarok; som anges med sitt namn.</entry>
</row>

<row>
<entry
>addCustomMenuItem</entry>
<entry
>Funktionen <quote
>addCustomMenuItem</quote
> lägger till ett menyalternativ i spellistans sammanhangsberoende meny. Anropet kräver två QString-parametrar, den första för undermenyns namn och den andra för alternativets namn i undermenyn. Båda parametrarna returneras i skripthanteringens underrättelsesystem.</entry>
</row>

<row>
<entry
>removeCustomMenuItem</entry>
<entry
>Funktionen <quote
>removeCustomMenuItem</quote
> tar bort menyalternagtiv som lagts till i spellistans sammanhangsberoende meny med funktionen addCustomMenuItem. Anropet använder samma QString-parametrar som addCustomMenuItem.</entry>
</row>

</tbody>
</tgroup>
</informaltable>


</sect2>

</sect1>

<sect1 id="cmd-line-options">
<title
>Kommandoradsalternativ</title>

<para
>AmaroK stöder användning av de vanliga Qt- och KDE-kommandoradsväljarna. AmaroK har också sina egna programspecifika väljare.</para>

<para
>Väljarna för Qt och KDE:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Väljare</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
>--help</entry>
<entry
>Visa hjälp om väljare.</entry>
</row>

<row>
<entry
>--help-qt</entry>
<entry
>Visa Qt-specifika väljare.</entry>
</row>

<row>
<entry
>--help-kde</entry>
<entry
>Visa KDE-specifika väljare.</entry>
</row>

<row>
<entry
>--help-all</entry>
<entry
>Visa alla väljare.</entry>
</row>

<row>
<entry
>--author</entry>
<entry
>Visa information om upphovsman.</entry>
</row>

<row>
<entry
>-v, --version</entry>
<entry
>Visa versionsinformation.</entry>
</row>

<row>
<entry
>--license</entry>
<entry
>Visa licensinformation.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>AmaroK-väljare:</para>

<note
><para
>&amarok;-väljarna är avsedda att användas medan &amarok; kör.</para
></note>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Väljare</entry>
<entry
>Åtgärd</entry>
</row>
</thead>
<tbody>

<row>
<entry
>-r, --previous</entry>
<entry
>Gå till föregående spår i spellistan.</entry>
</row>

<row>
<entry
>-p, --play</entry>
<entry
>Börja spela nuvarande spellista.</entry>
</row>

<row>
<entry
>-s, --stop</entry>
<entry
>Stoppa uppspelning.</entry>
</row>

<row>
<entry
>--pause</entry>
<entry
>Gör paus i uppspelning.</entry>
</row>

<row>
<entry
>-f, --next</entry>
<entry
>Gå till nästa spår i spellistan.</entry>
</row>

<row>
<entry
>-a, --append</entry>
<entry
>Lägg till filer eller webbadresser sist i spellistan.</entry>
</row>

<row>
<entry
>-e, --enqueue</entry>
<entry
>Se append, tillgänglig för att fungera ihop med tidigare versioner.</entry>
</row>

<row>
<entry
>--queue</entry>
<entry
>Köa filer eller webbadresser efter spåret som för närvarande spelas.</entry>
</row
> 

<row>
<entry
>-m, --toggle-playlist-window</entry>
<entry
>Växla spellistans fönster.</entry>
</row>

<row>
<entry
>--wizard</entry>
<entry
>Kör startguiden.</entry>
</row>

<row>
<entry
>--engine "namn"</entry>
<entry
>Starta &amarok; med gränssnittet "namn".</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>


<sect1 id="script-writing">
<title
>Skriva skript</title>

<para
>Att skriva skript låter dig enkelt utöka &amarok; utan att ändra den huvudsakliga kodbasen. Skript liknar insticksprogram, men istället för ett särskilt programmeringsgränssnitt använder de &amarok;s DCOP-gränssnitt för kommunikation. Det gör det möjligt att skriva skript i nästan vilket programspråk som helst, som Ruby, Python eller PHP. Du kan inte bara skapa skript med klassiska skriptspråk, utan också med kompilerade språk som C++ eller vanlig C. Dessutom kan &amarok; underrätta skript om särskilda händelser och få dem att reagera i enlighet med dem. Systemet med underrättelser förklaras senare i avsnittet.</para>

<sect2 id="script-bindings">
<title
>Kopplingar</title>

<para
>Det är möjligt att skriva enkla skript som inte kräver inblandning av användaren, och det är också möjligt att skapa skript med bekväma grafiska gränssnitt som fungerar som små program i sig själv. För programmering av det grafiska gränssnittet kan en av de många kopplingarna som KDE tillhandahåller användas, till exempel RubyQt, en koppling till Qt-biblioteket för Ruby. Det är dock värt att notera att inte alla användare har installerat alla tillgängliga kopplingar. Om du bestämmer dig för att använda en koppling, försök att använda någon av dem som är relativt spridda (t.ex. RubyQt eller PyQt).</para>

<para
>För att ge något gensvar när ett skript misslyckas köra på grund av ett beroende som saknas, kontrollera i skriptet om modulen du vill inkludera verkligen finns. Om beroendet saknas, bör du fånga felet och visa en informationsdialogruta med kommandoradverktyget "kdialog", så att användaren får reda på varför skriptet misslyckas med att köra.</para>

<para
>Följande exempel visar hur ett beroende som saknas kan fångas i Ruby:</para>

<programlisting
>begin
       require 'Korundum'
rescue LoadError
       error = 'Korundum (KDE-kopplingar för Ruby) från kdebindings v3.4 krävs för det här skriptet.'
       `kdialog --sorry '#{error}'`
       exit
end
</programlisting>

</sect2>

<sect2 id="script-templates">
<title
>Komma igång: Mallarna</title>

<para
>&amarok; tillhandahåller mallskript för flera språk i katalogen <filename class="directory"
>scripts/templates/</filename
>. Du kan använda dessa skript som en bas för dina egna, och utöka dem med funktioner du behöver. Du kommer att märka att det i själva verket är ganska rättframt att skriva skript. Om du till exempel vet en del om hur man programmerar i Python, tar det inte lång tid att skapa ditt eget skript.</para>

</sect2>

<sect2 id="script-controlling-amarok">
<title
>Styra &amarok; med DCOP</title>

<para
>Skript kan styra amaroK genom att anropa vissa av dess DCOP-funktioner. Det enklaste sättet att utföra en DCOP-funktion är genom att använda kommandoradsverktyget "dcop", som ingår i alla distributioner av KDE.</para>

<para
>Här är ett exempel på hur huvudvolymen ökas:</para>

<programlisting
>dcop amarok player volumeUp</programlisting>

<para
>De flesta skriptspråk tillåter att yttre program körs, med en funktion som exec(). På så sätt kan verktyget "dcop" enkelt anropas. Här är ett enkelt exempel i Python:</para>

<programlisting
>import os
 os.system("dcop amarok player volumeDown")
</programlisting>

</sect2>

<sect2 id="script-notifications">
<title
>Underrättelser</title>

<para
>&amarok; skickar underrättelser till alla skript som kör genom att skriva strängar till deras standardinmatning. Skripten bör därför hela tiden bevaka standardinmatningen och reagera på lämpligt sätt på var och en av de möjliga händelserna. Skript kan också välja att ignorera alla händelser de inte har någon nytta av.</para>

<para
>Följande underrättelser skickas av &amarok;:</para>

<programlisting
><cmdsynopsis
><command
>configure</command
></cmdsynopsis>
Talar om för skriptet att dess inställningsdialogruta ska visas. Skriptet
måste hantera lagring och inläsning av inställningsalternativ självt.
När ett skript startas, ställer amaroK in dess arbetskatalog till katalogen
där all data ska lagras.
</programlisting>

<programlisting
><cmdsynopsis
><command
>engineStateChange:</command
><arg
>empty|idle|paused|playing</arg
></cmdsynopsis>
Signalerar en ändring i gränssnittets tillstånd.
</programlisting>

<programlisting
><cmdsynopsis
><command
>trackChange</command
></cmdsynopsis>
Signalerar start av ett nytt spår. Skriptet kan därefter använda DCOP-funktioner
för att fråga efter ytterligare information om spåret, t.ex. metadata och längd.
</programlisting>

<programlisting
><cmdsynopsis
><command
>volumeChange</command
><arg
>ny-volym</arg
></cmdsynopsis>
Signalerar en ändring av huvudvolymen. Volymen är ett heltal med
intervallet 0-100.
</programlisting>

<programlisting
><cmdsynopsis
><command
>customMenuClicked:</command
><arg
>undermeny objektnamn sökvägar</arg
></cmdsynopsis>
Returnerar sökvägar till markerade filer i spellistan när det egna alternativet
i spellistans sammanhangsberoende meny klickas. Undermenyn och objektnamnet returneras
också i identifieringssyfte i fallet då ett skript lyssnar på flera underrättelser.
Använd DCOP-anropet 'dcop amarok script addCustomMenuItem( undermeny objektnamn )'
för att infoga ett objekt i den sammanhangsberoende menyn. Använd
DCOP-anropet 'dcop amarok script removeCustomMenuItem( undermeny objektnamn )'
för att ta bort ett objekt från den sammanhangsberoende menyn.
</programlisting>

</sect2>

<sect2 id="script-termination">
<title
>Avslutning av skript</title>

<para
>Innan &amarok; avslutas, eller när användaren stoppar ett skript i skripthanteringen, skickar &amarok; signalen SIGTERM till skriptet. Signalen kan fångas för att utföra upprensningsarbete, som att spara data eller inställningar.</para>

</sect2>

<sect2 id="script-packaging">
<title
>Paketering</title>

<para
>Skripthanteringen i &amarok; kan installera skriptpaket som användaren har laddat ner från en webbserver. Paketen är bara normala arkiv (.tar), valfritt komprimerade med bzip2 (.bz2). Vi rekommenderar starkt att använda ett filnamn som mitt-skript.amarokscript.tar.bz2, så att användaren lätt kan identifiera paketet som ett skript för amaroK.</para>

<note
><para
>&amarok; 1.3 accepterar bara skriptpaket med filändelsen amarokscript, det är alltså bättre att använda det ända från början.</para
></note>

<para
>Arkivets innehåll måste vara organiserat på följande sätt:</para>

<programlisting
>mitt-skript/
   README
   mitt-skript.py (körbar fil)
   en-modul.py
   fil.data
   ...
</programlisting>

</sect2>

<sect2 id="script-permissions">
<title
>Filrättigheter</title>

<para
>Huvudskriptet måste har körrättigheter (+x) inställda,medan ytterligare moduler som skriptet laddar inte ska ha körrättigheter. För att bevara filrättigheter i arkivet, ska du använda tar med väljaren -p.</para>

<programlisting
>tar -cf mitt-skript.amarokscript.tar -p mitt-skript</programlisting>

<note
><para
>&amarok; kan inte installera skriptet om inte filrättigheterna är riktigt inställda.</para
></note>

</sect2>

<sect2 id="script-distributing">
<title
>Distribution</title>

<para
>När paketet är klart, kan du ladda upp det till <ulink url="http://www.kde-apps.org"
>www.kde-apps.org</ulink
> och lägga till länken på &amarok;s <ulink url="http://amarok.kde.org/amarokwiki/index.php/Scripts"
>Wiki skriptsida</ulink
>. För posten kde-apps ska du använda kategorin <ulink url="http://kde-apps.org/index.php?xcontentmode=56"
>&amarok; Scripts</ulink
>.</para>

</sect2>

</sect1>


</chapter>

