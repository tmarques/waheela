<chapter id="advanced-features">
<title
>Muud amaroKi võimalused</title>


<sect1 id="keybd-shortcuts">
<title
>Kiirklahvid</title>

<para
>&amarok; kasutab kiirklahve nagu iga muu korralik rakendus. Allpool on ära toodud kiirklahvid ja nendega käivitatavad toimingud. Globaalseid kiirklahve saab seadistada, kui klõpsata hiire parema nupuga mängija aknas ja valida <guimenuitem
>Globaalsete kiirklahvide seadistamine...</guimenuitem
> &amarok;i enda kiirklahve saab seadistada, kui klõpsata hiire parema nupuga mängija aknas ja valida <guimenuitem
>Kiirklahvide seadistamine...</guimenuitem
></para>

<tip
><para
>Oma multimeediaklahvide kasutamiseks &amarok;i kiirklahvidena tuleb määrata klaviatuur &amarok;i juhtimiskeskuses.</para
></tip>

<para
>Globaalsed kiirklahvid:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Klahvikombinatsioon</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>X</keycap
></keycombo
></entry>
<entry
>Esitus</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>C</keycap
></keycombo
></entry>
<entry
>Paus</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>V</keycap
></keycombo
></entry>
<entry
>Stopp</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>B</keycap
></keycombo
></entry>
<entry
>Järgmine pala</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Eelmine pala</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>KP_Add</keycap
></keycombo
></entry>
<entry
>Heli juurde</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>KP_Subtract</keycap
></keycombo
></entry>
<entry
>Heli maha</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Shift</keycap
><keycap
>KP_Add</keycap
></keycombo
></entry>
<entry
>Palas edasiliikumine</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>Shift</keycap
><keycap
>KP_Subtract</keycap
></keycombo
></entry>
<entry
>Palas tagasiliikumine</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>A</keycap
></keycombo
></entry>
<entry
>Lisa andmekandja</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>P</keycap
></keycombo
></entry>
<entry
>Lugude nimekirja lülitamine</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>O</keycap
></keycombo
></entry>
<entry
>OSD näitamine</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
><keycap
>M</keycap
></keycombo
></entry>
<entry
>Heli välja</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>&amarok;i kiirklahvid:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Klahvikombinatsioon</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>C</keycap
></keycombo
></entry>
<entry
>Kopeeri</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>KP_Enter</keycap
></keycombo
></entry>
<entry
>Mine praegusele</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>D</keycap
></keycombo
></entry>
<entry
>Valitud palad järjekorda</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Q</keycap
></keycombo
></entry>
<entry
>Välju</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Shift</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Tee uuesti</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>S</keycap
></keycombo
></entry>
<entry
>Salvesta lugude nimekiri</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>A</keycap
></keycombo
></entry>
<entry
>Vali kõik</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>M</keycap
></keycombo
></entry>
<entry
>Menüüriba näitamine</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>H</keycap
></keycombo
></entry>
<entry
>Segatud</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Ctrl</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Võta tagasi</entry>
</row>


</tbody>
</tgroup>
</informaltable>


<para
>Lugude nimekirja sirvija kiirklahvid:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Klahvikombinatsioon</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycap
>Tühikuklahv</keycap
></entry>
<entry
>Lugude nimekirja laadimine</entry>
</row>

<row>
<entry
><keycap
>F2</keycap
></entry>
<entry
>Lugude nimekirja ümbernimetamine</entry>
</row>

<row>
<entry
><keycap
>Backspace</keycap
></entry>
<entry
>Lugude nimekirja eemaldamine</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>

<sect1 id="the-dcop-interface">
<title
>DCOP-liides</title>

<para
>amaroKi DCOP-liides võimaldab imelihtsalt juhtida amaroKi tööd enda loodud skriptidega.</para>

<para
>amaroKi DCOP-liides pakub mitmeid üldisi funktsioone, mida kasutavad ka muud KDE rakendused. Käesolevas osas kirjeldame neljas tabelis nii muusikakogu, mängija, lugude nimekirja kui ka skriptide DCOP-funktsioone. Näiteks DCOP-funktsioon <quote
>pause</quote
> näeb välja selline:</para>

<para
><prompt
>&percnt;</prompt
>dcop amarok player pause</para>

<sect2 id="dcop-collection">
<title
>DCOP ja amaroKi muusikakogu</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-väljakutse</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
>query</entry>
<entry
>Väljakutse <quote
>query</quote
> lubab saata otsese andmebaasi päringu &amarok;i muusikakogule.</entry>
</row>

<row>
<entry
>scanCollection</entry>
<entry
>Väljakutse <quote
>scanCollection</quote
> uurib läbi sinu muusikakogu.</entry>
</row>

<row>
<entry
>scanCollectionChanges</entry>
<entry
>Väljakutse <quote
>scanCollectionChanges</quote
> uurib sinu muusikakogu võimalikke muudatusi.</entry>
</row>

<row>
<entry
>similarArtists</entry>
<entry
>Väljakutse <quote
>similarArtists</quote
> tagastab parajasti mängitava pala esitajaga sarnased esitajad. Tulemuste arvu saab piirata <quote
>artists</quote
> täisarvulise väärtusega.</entry>
</row>

<row>
<entry
>totalAlbums</entry>
<entry
>Väljakutse <quote
>totalAlbums</quote
> tagastab albumite koguarvu sinu muusikakogus.</entry>
</row>

<row>
<entry
>totalArtists</entry>
<entry
>Väljakutse <quote
>totalArtists</quote
> tagastab esitajate koguarvu sinu muusikakogus.</entry>
</row>

<row>
<entry
>totalCompilations</entry>
<entry
>Väljakutse <quote
>totalCompilations</quote
> tagastab kompilatsioonide koguarvu sinu muusikakogus.</entry>
</row>

<row>
<entry
>totalGenres</entry>
<entry
>Väljakutse <quote
>totalGenres</quote
> tagastab žanride koguarvu sinu muusikakogus.</entry>
</row>

<row>
<entry
>totalTracks</entry>
<entry
>Väljakutse <quote
>totalTracks</quote
> tagastab palade koguarvu sinu muusikakogus.</entry>
</row>


</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-player">
<title
>DCOP ja amaroKi mängija</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-väljakutse</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
>album</entry>
<entry
>Väljakutse <quote
>album</quote
> tagastab parajasti mängitava pala albumi.</entry>
</row>

<row>
<entry
>artist</entry>
<entry
>Väljakutse <quote
>artist</quote
> tagastab parajasti mängitava pala esitaja.</entry>
</row>

<row>
<entry
>bitrate</entry>
<entry
>Väljakutse <quote
>bitrate</quote
> tagastab parajasti mängitava pala bitikiiruse.</entry>
</row>

<row>
<entry
>comment</entry>
<entry
>Väljakutse <quote
>comment</quote
> tagastab parajasti mängitava pala kommentaari.</entry>
</row>

<row>
<entry
>coverImage</entry>
<entry
>Väljakutse <quote
>coverImage</quote
> tagastab parajasti mängitava pala kaanepildi URL-i.</entry>
</row>

<row>
<entry
>currentTime</entry>
<entry
>Väljakutse <quote
>currentTime</quote
> tagastab parajasti mängitava pala positsiooni (mm:ss).</entry>
</row>

<row>
<entry
>encodedURL</entry>
<entry
>Väljakutse <quote
>encodedURL</quote
> tagastab parajasti mängitava pala tühikutega kodeeritud URL-i.</entry>
</row>

<row>
<entry
>engine</entry>
<entry
>Väljakutse <quote
>engine</quote
> tagastab parajasti kasutatatava audiomootori nime.</entry>
</row>

<row>
<entry
>genre</entry>
<entry
>Väljakutse <quote
>genre</quote
> tagastab parajasti mängitava pala žanri.</entry>
</row>

<row>
<entry
>lyrics</entry>
<entry
>Väljakutse <quote
>lyrics</quote
> tagastab parajasti mängitava pala puhverdatud laulusõnad.</entry>
</row>

<row>
<entry
>lyricsByPath</entry>
<entry
>Väljakutse <quote
>lyricsByPath</quote
> käivitab asukohaga määratud pala puhverdatud laulusõnad.</entry>
</row>

<row>
<entry
>nowPlaying</entry>
<entry
>Väljakutse <quote
>nowPlaying</quote
> tagastab parajasti mängitava pala artisti ja pealkirja kujul <quote
>Esitaja - pealkiri</quote
>. Kui üks kahest id3 sildist on tühi, tagastatakse ainult <quote
>esitaja</quote
> või <quote
>pealkiri</quote
> (ilma <quote
>-</quote
>).</entry>
</row>

<row>
<entry
>path</entry>
<entry
>Väljakutse <quote
>path</quote
> tagastab parajasti mängitava pala asukoha failisüsteemis.</entry>
</row>

<row>
<entry
>setContextStyle</entry>
<entry
>Väljakutse <quote
>setContextStyle</quote
> määrab vastavalt nimele kontekstisirvija CSS-teema.</entry>
</row>

<row>
<entry
>title</entry>
<entry
>Väljakutse <quote
>title</quote
> tagastab parajasti mängitava pala pealkirja.</entry>
</row>

<row>
<entry
>totalTime</entry>
<entry
>Väljakutse <quote
>totalTime</quote
> tagastab parajasti mängitava pala kogukestvuse (mm:ss).</entry>
</row>

<row>
<entry
>track</entry>
<entry
>Väljakutse <quote
>track</quote
> tagastab parajasti mängitava pala rajanumbri.</entry>
</row>

<row>
<entry
>year</entry>
<entry
>Väljakutse <quote
>year</quote
> tagastab parajasti mängitava pala aasta.</entry>
</row>

<row>
<entry
>dynamicModeStatus</entry>
<entry
>Väljakutse <quote
>dynamicModeStatus</quote
> tagastab tõeväärtuse, mis näitab, kas dünaamiline režiim on sisse lülitatud.</entry>
</row>

<row>
<entry
>equalizerEnabled</entry>
<entry
>Väljakutse <quote
>equalizerEnabled</quote
> tagastab tõeväärtuse, mis näitab, kas ekvalaiser on sisse lülitatud.</entry>
</row>

<row>
<entry
>isPlaying</entry>
<entry
>Väljakutse <quote
>isPlaying</quote
> tagastab tõeväärtuse, mis näitab, kas mängija esitab parajasti pala või mitte.</entry>
</row>

<row>
<entry
>randomModeStatus</entry>
<entry
>Väljakutse <quote
>randomModeStatus</quote
> tagastab juhusliku režiimi oleku (tõene või väär).</entry>
</row>

<row>
<entry
>repeatPlaylistStatus</entry>
<entry
>Väljakutse <quote
>repeatPlaylistStatus</quote
> tagastab lugude nimekirja kordamise oleku (tõene või väär).</entry>
</row>

<row>
<entry
>repeatTrackStatus</entry>
<entry
>Väljakutse <quote
>repeatTrackStatus</quote
> tagastab pala kordamise oleku (tõene või väär).</entry>
</row>

<row>
<entry
>getVolume</entry>
<entry
>Väljakutse <quote
>getVolume</quote
> tagastab helitugevuse väärtuse vahemikus 0-100.</entry>
</row>

<row>
<entry
>sampleRate</entry>
<entry
>Väljakutse <quote
>sampleRate</quote
> tagastab parajasti mängitava pala diskreetimissageduse.</entry>
</row>

<row>
<entry
>score</entry>
<entry
>Väljakutse <quote
>score</quote
> tagastab parajasti mängitava pala hinnangu.</entry>
</row>

<row>
<entry
>setLyricsByPath</entry>
<entry
>Väljakutse <quote
>setLyricsByPath</quote
> määrab asukohaga antud pala sõnad. Väljakutsega <quote
>lyrics</quote
> saab näha korrektse HTML-vormingu näiteid.</entry>
</row>

<row>
<entry
>status</entry>
<entry
>Väljakutse <quote
>status</quote
> tagastab mootori oleku väärtuse: 2 tähendab mängimist, 1 pausi ja 0 jõudeolekut.</entry>
</row>

<row>
<entry
>trackCurrentTime</entry>
<entry
>Väljakutse <quote
>trackCurrentTime</quote
> tagastab parajasti mängitava pala esitamisele seni kulunud aja sekundites.</entry>
</row>

<row>
<entry
>trackPlayCounter</entry>
<entry
>Väljakutse <quote
>trackPlayCounter</quote
> tagastab arvu, mis näitab, mitu korda on parajasti mängitavat pala mängitud.</entry>
</row>

<row>
<entry
>trackTotalTime</entry>
<entry
>Väljakutse <quote
>trackTotalTime</quote
> tagastab parajasti mängitava pala kogukestvuse sekundites.</entry>
</row>

<row>
<entry
>configEqualizer</entry>
<entry
>Väljakutse <quote
>configEqualizer</quote
> toob esiplaanile ekvalaiseri seadistamise akna.</entry>
</row>

<row>
<entry
>enableDynamicMode</entry>
<entry
>Väljakutse <quote
>enableRandomMode</quote
> võimaldab tõeväärtust andes lülitada sisse või välja dünaamilise režiimi (0 - väljas, 1 - sees).</entry>
</row>

<row>
<entry
>enableOSD</entry>
<entry
>Väljakutse <quote
>enableOSD</quote
> võimaldab tõeväärtust andes lülitada OSD sisse või välja.</entry>
</row>

<row>
<entry
>enableRandomMode</entry>
<entry
>Väljakutse <quote
>enableRandomMode</quote
> võimaldab tõeväärtust andes lülitada sisse või välja juhusliku režiimi (0 - väljas, 1 - sees).</entry>
</row>

<row>
<entry
>enableRepeatPlaylist</entry>
<entry
>Väljakutse <quote
>enableRepeatPlaylist</quote
> võimaldab lülitada lugude nimekirja kordamise režiimi (0 - keelatud, 1 - lubatud).</entry>
</row>

<row>
<entry
>enableRepeatTrack</entry>
<entry
>Väljakutse <quote
>enableRepeatTrack</quote
> võimaldab lülitada pala kordamise režiimi (0 - keelatud, 1 - lubatud).</entry>
</row>

<row>
<entry
>mute</entry>
<entry
>Väljakutse <quote
>mute</quote
> võimaldab parajasti mängitava pala tummaks muuta või taas kuuldavaks teha.</entry>
</row>

<row>
<entry
>next</entry>
<entry
>Väljakutse <quote
>next</quote
> käivitab mängijas järgmise pala.</entry>
</row>

<row>
<entry
>pause</entry>
<entry
>Väljakutse <quote
>pause</quote
> peatab parajasti mängitava pala esitamise.</entry>
</row>

<row>
<entry
>play</entry>
<entry
>Väljakutse <quote
>play</quote
> käivitab mängija kohast, kus see peatati.</entry>
</row>

<row>
<entry
>playPause</entry>
<entry
>Väljakutse <quote
>playPause</quote
> käivitab mängija, kui see on parajasti peatatud. Samas peatab see mängija, kui see parajasti pala esitab.</entry>
</row>

<row>
<entry
>prev</entry>
<entry
>Väljakutse <quote
>prev</quote
> käivitab mängijas eelmise pala.</entry>
</row>

<row>
<entry
>seek</entry>
<entry
>Väljakutsega <quote
>seek</quote
> saab liikuda palas sekunditega määratud asukohale.</entry>
</row>

<row>
<entry
>seekRelative</entry>
<entry
>Väljakutsega <quote
>seekRelative</quote
> saab liikuda palas asukohale, mis on määratud sekundites antud erinevusega praegusest asukohast.</entry>
</row>

<row>
<entry
>setEqualizer</entry>
<entry
>Väljakutse <quote
>setEqualizer</quote
> võimaldab määrata ekvalaiseri liuguri väärtuse 11 täisarvu kasutades. Liuguri väärtused on vahemikus -255 (madalaim) kuni 255 (kõrgeim). Esimene täisarv määrab eelmoonutuse väärtuse, üleväänud eelmoonutuse sagedusväärtused vahemikus 60Hz kuni 16kHz.</entry>
</row>

<row>
<entry
>setEqualizerEnabled</entry>
<entry
>Väljakutse <quote
>setEqualizerEnabled</quote
> võimaldab tõeväärtust andes lülitada ekvalaiseri sisse või välja.</entry>
</row>

<row>
<entry
>setScore</entry>
<entry
>Väljakutse <quote
>setVolume</quote
> määrab parajasti esitatava pala hinnangu arvuga vahemikus 0 kuni 100.</entry>
</row>

<row>
<entry
>setScoreByPath</entry>
<entry
>Väljakutse <quote
>setScoreByPath</quote
> määrab asukohaga antud pala hinnangu arvuga vahemikus 0 kuni 100.</entry>
</row>

<row>
<entry
>setVolume</entry>
<entry
>Väljakutse <quote
>setVolume</quote
> muudab helitugevust vahemikus 0-100.</entry>
</row>

<row>
<entry
>showBrowser</entry>
<entry
>Väljakutse <quote
>showBrowser</quote
> näitab sirvijat lugude nimekirja aknas. Kehtivad väärtused on konteksti-, kogu-, lugude nimekirja, andmekandjate ja failisüsteemi sirvija.</entry>
</row>

<row>
<entry
>showOSD</entry>
<entry
>Väljakutse <quote
>showOSD</quote
> näitab parajasti mängitava pala infoga ekraaniesitust (OSD).</entry>
</row>

<row>
<entry
>stop</entry>
<entry
>Väljakutse <quote
>stop</quote
> peatab mängija, kui see parajasti lugu esitab.</entry>
</row>

<row>
<entry
>volumeDown</entry>
<entry
>Väljakutse <quote
>volumeDown</quote
> kahandab helitugevust ühe sammu võrra.</entry>
</row>

<row>
<entry
>volumeUp</entry>
<entry
>Väljakutse <quote
>volumeUp</quote
> suurendab helitugevust ühe sammu võrra.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-playlist">
<title
>DCOP ja amaroKi lugude nimekiri</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-väljakutse</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
>saveCurrentPlaylist</entry>
<entry
>Väljakutse <quote
>saveCurrentPlaylist</quote
> salvestab aktiivse lugude nimekirja failina ~/.kde/share/apps/amarok/current.xml.</entry>
</row>

<row>
<entry
>getActiveIndex</entry>
<entry
>Väljakutse <quote
>getActiveIndex</quote
> tagastab täisarvu, mis näitab parajasti mängitava pala positsiooni lugude nimekirjas.</entry>
</row>

<row>
<entry
>getTotalTrackCount</entry>
<entry
>Väljakutse <quote
>getTotalTrackCount</quote
> tagastab palade koguarvu lugude nimekirjas.</entry>
</row>

<row>
<entry
>addMedia</entry>
<entry
>Väljakutsega <quote
>addMedia</quote
> saab üksikfaile lugude nimekirja lisada.</entry>
</row>

<row>
<entry
>addMediaList</entry>
<entry
>Väljakutsega <quote
>addMediaList</quote
> saab mitu faili korraga lugude nimekirja lisada.</entry>
</row>

<row>
<entry
>clearPlaylist</entry>
<entry
>Väljakutsega <quote
>clearPlaylist</quote
> saab puhastada kogu lugude nimekirja.</entry>
</row>

<row>
<entry
>playByIndex</entry>
<entry
>Väljakutse <quote
>playByIndex</quote
> käivitab positsiooniga lugude nimekirjas määratud pala mängimise. </entry>
</row>

<row>
<entry
>playMedia</entry>
<entry
>Väljakutse <quote
>playMedia</quote
> käivitab KURL-iga määratud pala mängimise.</entry>
</row>

<row>
<entry
>popupMessage</entry>
<entry
>Väljakutse <quote
>popupMessage</quote
> avab lugude nimekirja aknas hüpiksõnumi, mille sisu määrab QString.</entry>
</row>

<row>
<entry
>repopulate</entry>
<entry
>Väljakutse <quote
>repopulate</quote
> täidab dünaamilises režiimis lugude nimekirja uuesti paladega.</entry>
</row>

<row>
<entry
>removeCurrentTrack</entry>
<entry
>Väljakutse <quote
>removeCurrentTrack</quote
> eemaldab parajasti mängitava pala lugude nimekirjast.</entry>
</row>

<row>
<entry
>saveM3u</entry>
<entry
>Väljakutse <quote
>saveM3u</quote
> salvestab aktiivse lugude nimekirja M3U vormingus. Lisaks tuleb määrata salvestamise asukoht ning anda väärtus 0 või 1, mis osutab sellele, kas kirjutatakse suhtelisse asukohta või mitte.</entry>
</row>

<row>
<entry
>setStopAfterCurrent</entry>
<entry
>Väljakutse <quote
>setStopAfterCurrent</quote
> peatab lugude nimekirja esitamise pärast parajasti mängitava pala lõppu.</entry>
</row>

<row>
<entry
>shortStatusMessage</entry>
<entry
>Väljakutse <quote
>shortStatusMessage</quote
> näitab tekstistringi sõnumina olekuribal.</entry>
</row>

<row>
<entry
>shufflePlaylist</entry>
<entry
>Väljakutsega <quote
>shufflePlaylist</quote
> saab muuta palade järjekorra lugude nimekirjas juhuslikuks.</entry>
</row>

<row>
<entry
>togglePlaylist</entry>
<entry
>Väljakutse <quote
>togglePlaylist</quote
> lülitab lugude nimekirja akna näitamise sisse või välja.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-script">
<title
>DCOP ja amaroKi skriptid</title>


<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>DCOP-väljakutse</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
>listRunningScripts</entry>
<entry
>Väljakutse <quote
>listRunningScripts</quote
> näitab kõigi töötavate &amarok;i skriptide nimekirja.</entry>
</row>

<row>
<entry
>runScript</entry>
<entry
>Väljakutse <quote
>runScript</quote
> käivitab nimega määratud &amarok;i skripti.</entry>
</row>

<row>
<entry
>stopScript</entry>
<entry
>Väljakutse <quote
>stopScript</quote
> peatab nimega määratud &amarok;i skripti.</entry>
</row>

<row>
<entry
>addCustomMenuItem</entry>
<entry
>Väljakutse <quote
>addCustomMenuItem</quote
> lisab menüükirje lugude nimekirja kontekstimenüüsse. Väljakutse kasutab argumendina kaht QStringi, millest esimene määrab alammenüü nime, teine kirje nime alammenüüs. Mõlemad QStringid tagastatakse skriptihalduri märguannete süsteemis.</entry>
</row>

<row>
<entry
>removeCustomMenuItem</entry>
<entry
>Väljakutse <quote
>removeCustomMenuItem</quote
> eemaldab menüükirje, mis on lugude nimekirja lisatud väljakutsega addCustomMenuItem. Väljakutse kasutab samu QStringe, mida kasutab addCustomMenuItem.</entry>
</row>

</tbody>
</tgroup>
</informaltable>


</sect2>

</sect1>

<sect1 id="cmd-line-options">
<title
>Käsurea võtmed</title>

<para
>amaroK toetab standardseid Qt ja KDE käsurea võtmeid, kuid pakub ka mõningaid spetsiifilisi võtmeid.</para>

<para
>Qt ja KDE võtmed:</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Võti</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
>--help</entry>
<entry
>Näitab abiteadet võtmete kohta.</entry>
</row>

<row>
<entry
>--help-qt</entry>
<entry
>Näitab Qt spetsiifilisi võtmeid.</entry>
</row>

<row>
<entry
>--help-kde</entry>
<entry
>Näitab KDE spetsiifilisi võtmeid.</entry>
</row>

<row>
<entry
>--help-all</entry>
<entry
>Näitab kõiki võtmeid.</entry>
</row>

<row>
<entry
>--author</entry>
<entry
>Näitab infot autori kohta.</entry>
</row>

<row>
<entry
>-v, --version</entry>
<entry
>Näitab versiooni.</entry>
</row>

<row>
<entry
>--license</entry>
<entry
>Näitab litsentsi.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>amaroKi võtmed:</para>

<note
><para
>&amarok;i võtmed on mõeldud kasutamiseks &amarok;i töötamise ajal.</para
></note>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Võti</entry>
<entry
>Toiming</entry>
</row>
</thead>
<tbody>

<row>
<entry
>-r, --previous</entry>
<entry
>Hüppab lugude nimekirjas eelmisele palale.</entry>
</row>

<row>
<entry
>-p, --play</entry>
<entry
>Alustab lugude nimekirja mängimist.</entry>
</row>

<row>
<entry
>-s, --stop</entry>
<entry
>Katkestab taasesituse.</entry>
</row>

<row>
<entry
>--pause</entry>
<entry
>Peatab taasesituse.</entry>
</row>

<row>
<entry
>-f, --next</entry>
<entry
>Hüppab lugude nimekirjas järgmisele palale.</entry>
</row>

<row>
<entry
>-a, --append</entry>
<entry
>Lisab failid/URL-id lugude nimekirja.</entry>
</row>

<row>
<entry
>-e, --enqueue</entry>
<entry
>Vaata append (kasutusel tagasiühilduvuse nimel).</entry>
</row>

<row>
<entry
>--queue</entry>
<entry
>Seab failid/URL-id järjekorda parajasti mängitava pala järele.</entry>
</row
> 

<row>
<entry
>-m, --toggle-playlist-window</entry>
<entry
>Lugude nimekirja akna lülitamine.</entry>
</row>

<row>
<entry
>--wizard</entry>
<entry
>Käivitab esimese korra nõustaja.</entry>
</row>

<row>
<entry
>--engine "nimi"</entry>
<entry
>Käivitab &amarok;i mootoriga "nimi".</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>


<sect1 id="script-writing">
<title
>Skriptide kirjutamine</title>

<para
>Skriptid võimaldavad &amarok;ki väga lihtsalt laiendada ilma selle põhikoodi muutmata. Skriptid sarnanevad selles mõttes pluginatele, kuid erinevalt spetsiaalsest pluginate API-st kasutavad nad kommunikatsiooniks &amarok;i DCOP-liidest. Nii on skripte võimalik kirja panna peaaegu mis tahes programmeerimiskeeles (nt. Ruby, Python, PHP). Skripte saab luua mitte ainult klassikalistes skriptikeeltes, vaid ka keerukamates keeltes, näiteks C++ või puhas C. Lisaks võib &amarok; edastada skriptidele teatud sündmuste korral märguande, mis paneb neid midagi tegema. Seda selgitame käesolevas osas edaspidi.</para>

<sect2 id="script-bindings">
<title
>Seosed</title>

<para
>Võimalik on kirjutada nii lihtsaid skripte, mis ei vaja kasutaja sekkumist, kui ka graafilise kasutajaliidesega skripte, mis tegutsevad justkui omaette väikesed rakendused. Viimaste korral saab kasutada mõnda arvukatest seostes, mida KDE pakub, näiteks Qt teegi seost Ruby jaoks RubyQt. Tuleb siiski märkida, et mitte kõigil kasutajatel ei pruugi kõik seosed paigaldatud olla. Kui otsustad mõnda seost kasutada, ürita pruukida mõnda levinumat (nt. RubyQt või PyQt).</para>

<para
>Tagasiside saamiseks, kui skripti töö peaks ebaõnnestuma puuduva sõltuvuse tõttu, lisa palun skripti kontroll, kas moodul, mida soovid kasutada, on ka tegelikult olemas. Kui seda pole, peaks skript veast aru saama ning näitama infodialoogi (käsureatööriista "kdialog" abil), et kasutaja saaks teada, miks skript ei töötanud.</para>

<para
>Üks näide, kuidas tuvastada puuduv sõltuvus Ruby korral:</para>

<programlisting
>begin
       require 'Korundum'
rescue LoadError
       error = 'Korundum (KDE bindings for ruby) from kdebindings v3.4 is required for this script.'
       `kdialog --sorry '#{error}'`
       exit
end
</programlisting>

</sect2>

<sect2 id="script-templates">
<title
>Alustamine: mallid</title>

<para
>&amarok; pakub mitmes keeles skriptimalle kataloogis <filename class="directory"
>scripts/templates/</filename
>. Neid saab kasutada alusena enda skripti loomisel. Küllap märkad, et skriptide loomine on üsna lihtne: kui sa tunned näiteks vähegi programmeerimist Pythoni keeles, ei ole vastava skripti loomine kuigi pikk tegevus.</para>

</sect2>

<sect2 id="script-controlling-amarok">
<title
>&amarok;i juhtimine DCOP-i abil</title>

<para
>Skriptidega saab amaroKi tegevust juhtida, kutsudes välja selle DCOP-funktsioone. Lihtsaim viis DCOP-funktsiooni väljakutsumiseks on kasutada käsureautiliiti "dcop", mis kuulub alati KDE koosseisu.</para>

<para
>Toome näite peamise helitugevuse suurendamise kohta:</para>

<programlisting
>dcop amarok player volumeUp</programlisting>

<para
>Enamik skriptikeeli võimaldab käivitada väliseid programme (näiteks funktsiooniga exec()). Nii saab utiliiti "dcop" üsna lihtsalt välja kutsuda. Toome ühe lihtsa näite Pythoni keeles:</para>

<programlisting
>import os
 os.system("dcop amarok player volumeDown")
</programlisting>

</sect2>

<sect2 id="script-notifications">
<title
>Märguanded</title>

<para
>&amarok; võib saata kõigile töötavatele skriptidele märguandeid, kirjutades vastava stringi nende standardsisendi kanalisse. Seepärast peab skript pidevalt jälgima oma standardsisendit ja võimalike märguannete puhul vajalikult tegutsema. Skriptid võivad küll ka mitte tegutseda teatud sündmuste puhul, kui need neid ei puuduta.</para>

<para
>&amarok; saadab järgmisi märguandeid:</para>

<programlisting
><cmdsynopsis
><command
>configure</command
></cmdsynopsis>
Annab skriptile korralduse näidata oma seadistustedialoogi.
Skript peab seadistusvalikute salvestamise ja laadimisega ise toime tulema.
Skripti käivitamisel määrab amaroK selle töökataloogi kataloogiks,
kuhu salvestada kõik andmed.
</programlisting>

<programlisting
><cmdsynopsis
><command
>engineStateChange:</command
><arg
>empty|idle|paused|playing</arg
></cmdsynopsis>
Annab märku mootori oleku muutumisest.
</programlisting>

<programlisting
><cmdsynopsis
><command
>trackChange</command
></cmdsynopsis>
Annab märku uue pala algusest. Skript võib seejärel kasutada DCOP-funktsioone
pala kohta täiendava info hankimiseks (nt. metaandmed, pikkus).
</programlisting>

<programlisting
><cmdsynopsis
><command
>volumeChange</command
><arg
>newVolume</arg
></cmdsynopsis>
Annab märku peamise helitugevuse muutumisest.
Helitugevus on täisarv vahemikus 0 kuni 100.
</programlisting>

<programlisting
><cmdsynopsis
><command
>customMenuClicked:</command
><arg
>submenu itemTitle paths</arg
></cmdsynopsis>
Tagastab lugude nimekirja valitud failide asukohad,
kui klõpsatakse kohandatud lugude nimekirja kontekstimenüü mõnda kirjet.
Tagastatakse ka alammenüü ja elemendi nimi, mida läheb vaja juhul,
kui skript jälgib mitmeid märguandeid.
Elemendi lisamiseks kontekstimenüüsse kasuta DCOP-väljakutset 
'dcop amarok script addCustomMenuItem( submenu itemTitle )'.
Elemendi eemaldamiseks kontekstimenüüst kasuta DCOP-väljakutset 
'dcop amarok script removeCustomMenuItem( submenu itemTitle )'.
</programlisting>

</sect2>

<sect2 id="script-termination">
<title
>Skripti töö lõpetamine</title>

<para
>Enne seda, kui &amarok; töö lõpetab või kui kasutaja peatab skripti skriptihalduris, saadab &amarok; skriptile signaali SIGTERM. Selle signaali saamisel peab skript ette võtma vajalikud toimingud, näiteks salvestama andmed või seadistused.</para>

</sect2>

<sect2 id="script-packaging">
<title
>Pakkimine</title>

<para
>&amarok;i skriptihaldur oskab paigaldada skriptipakke, mida kasutaja on veebist alla laadinud. Pakid on pakitud tavaliselt (.tar), lisaks on võimalik tihendada neid ka bzip2-ga (.bz2). Me soovitame tungivalt kasutada failinime kujul minuskript.amarokscript.tar.bz2, et kasutajad saaksid kohe aru, et tegemist on just amaroKi skriptiga.</para>

<note
><para
>&amarok; 1.3 tunnustab ainult laiendiga amarokscript skriptipakke, nii et mõistlik oleks seda igal juhul kasutada.</para
></note>

<para
>Paki sisu peab olema järgmine:</para>

<programlisting
>minuskript/
   README
   minuskript.py (käivitatav fail)
   mingimoodul.py
   foo.data
   ...
</programlisting>

</sect2>

<sect2 id="script-permissions">
<title
>Failiõigused</title>

<para
>Põhiskriptil peab olema käivitamise õigus (+x), teised moodulid aga, mida skript laeb, ei tohi olla käivitamisõigusega. Failiõiguste säilitamiseks pakis tuleks see pakkida võtmega -p:</para>

<programlisting
>tar -cf minuskript.amarokscript.tar -p minuskript</programlisting>

<note
><para
>&amarok; ei saa skripti paigaldada, kui õigused ei ole korrektsed.</para
></note>

</sect2>

<sect2 id="script-distributing">
<title
>Levitamine</title>

<para
>Kui oled paki valmis teinud, võid laadida selle saidile <ulink url="http://www.kde-apps.org"
>www.kde-apps.org</ulink
> ja lisada lingi &amarok;i <ulink url="http://amarok.kde.org/amarokwiki/index.php/Scripts"
>Wiki skriptileheküljele</ulink
>. Saidil kde-apps tuleks kasutada kategooriat <ulink url="http://kde-apps.org/index.php?xcontentmode=56"
>&amarok; Scripts</ulink
>.</para>

</sect2>

</sect1>


</chapter>

